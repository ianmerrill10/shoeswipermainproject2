================ FILE: shoeswipermainproject2-main/.github/CODEOWNERS ================
# Default owner for everything in the repo
* @ianmerrill10

# Critical files require owner review
SECURITY.md @ianmerrill10
.env* @ianmerrill10
*.sql @ianmerrill10


================ FILE: shoeswipermainproject2-main/.github/workflows/deploy-edge-functions.yml ================
name: Deploy Supabase Edge Functions

on:
  push:
    branches:
      - main
    paths:
      - 'shoeswiper-complete/supabase/functions/**'
  workflow_dispatch:

permissions:
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: supabase/setup-cli@v1
        with:
          version: latest

      - name: Link Supabase Project
        run: supabase link --project-ref ${{ secrets.SUPABASE_PROJECT_REF }}
        env:
          SUPABASE_ACCESS_TOKEN: ${{ secrets.SUPABASE_ACCESS_TOKEN }}

      - name: Deploy Edge Functions
        run: supabase functions deploy analyze-outfit --project-ref ${{ secrets.SUPABASE_PROJECT_REF }}
        working-directory: shoeswiper-complete
        env:
          SUPABASE_ACCESS_TOKEN: ${{ secrets.SUPABASE_ACCESS_TOKEN }}


================ FILE: shoeswipermainproject2-main/.nvmrc ================
20

================ FILE: shoeswipermainproject2-main/AIContext.md ================
# ShoeSwiper AI Context File
**Last Updated:** 2024-12-03
**Current Branch:** `claude/organize-project-review-017XdUugVActQYqDf6tCpkWK`
**Project Status:** Active Development - Pre-Launch
**Sprint:** 9 (Completed)

---

## SECTION 1: USER PROFILE

**Name:** Ian (43 years old)
**Background:** 10 years IT at Toyota dealership specializing in F&I (Finance & Insurance) operations
**Family:** Married with two children
**Interests:** Dirt bikes, Camaros
**Social:** TikTok @dadsellsgadgets (~2,000 followers)

**Development Strategy:** Multi-AI approach using Claude, Gemini, ChatGPT, and Devin AI in parallel
**AWS Budget:** $200-1600/month comfortable for enterprise-grade infrastructure
**Approach:** Speed-to-market with aggressive scaling, targeting first sales within 24 hours of launch

**Active Ventures:**
- ShoeSwiper (PRIMARY)
- FreeAutoCRM (Automotive dealership management)
- RateGarage.com (Auto loan comparison)
- WaitingTheLongest.com (Dog adoption aggregator)
- InviteGenerator.com (AI invitations)
- BitRewards (Bitcoin rewards app)
- Premium domains: AIconcentrator.com

---

## SECTION 2: CORE AI OPERATIONAL RULES (NEVER VIOLATE)

### Priority Order
1. **SECURITY** - Highest priority. A data breach would destroy the brand forever. Never sacrifice security for cost savings.
2. **MAXIMUM PROFITABILITY & USER GROWTH** - Prioritize adoption + monetization. Optimize for maximum net profit.
3. **MAXIMUM WORK OUTPUT** - Complete as much as possible per response. Speed to launch is critical. Do not conserve tokens.

### Strict Operational Rules
- **NO UNAUTHORIZED CHANGES** - Never add/delete/modify features unless specifically instructed. No creative deviations.
- **SELF-VERIFICATION** - Before EVERY response ask: "Did I do exactly as told or did I change something?" If any unauthorized change: explain, cease operation, await instructions.
- **PUSH TO GITHUB EVERY 5 PROMPTS** - Mandatory
- **UPDATE THIS FILE** - At the end of every prompt, update AIContext.md with current state
- **PRIORITY LIST** - Always end responses with priority-sorted incomplete features list

### Repetitive Task Protocol
1. Calculate total items required
2. Estimate work/tokens per item
3. Divide into manageable chunks
4. Report: "This job will take X responses. Shall I begin?"
5. Execute when user prompts with "next"
6. Provide running tally (e.g., "247/1000 items collected")

---

## SECTION 3: PROJECT OVERVIEW

### What is ShoeSwiper?
TikTok-style sneaker discovery marketplace combining AI-powered features, outfit analysis, and social commerce. Goal: capture 3-5% of the $30B US sneaker resale market by 2030.

### Competitive Advantages
- Discovery-first experience (swipe interface like TikTok/Tinder)
- Lowest-in-market fees (5-8% vs competitors 8-20%)
- Instant local transactions
- Autonomous AI-powered growth engine

### Business Model
- **Primary Revenue:** Marketplace commissions (8% standard, 12% featured)
- **Secondary Revenue:** Amazon Associates affiliate (tag: shoeswiper-20), subscriptions, ads
- **Affiliate Tag:** `shoeswiper-20` - ALL Amazon links MUST include `?tag=shoeswiper-20`
- **Admin Email:** dadsellsgadgets@gmail.com

---

## SECTION 4: TECH STACK

### Frontend
- React 18 + TypeScript
- Tailwind CSS + Framer Motion
- Vite build tool
- React Query for data fetching
- Zustand for state management

### Backend
- Supabase (Auth, Database, Storage, Edge Functions)
- Express/TypeScript API
- PostgreSQL with Row Level Security (RLS)

### AI/ML
- Google Gemini Vision API (outfit analysis)
- Amazon Bedrock Claude (content generation)
- AWS SageMaker (price prediction, recommendations)

### Infrastructure (AWS)
- Lambda (serverless functions)
- DynamoDB (high-throughput analytics)
- S3 + CloudFront (image CDN)
- API Gateway, Cognito, SES, SNS
- Step Functions, EventBridge
- WAF, CloudWatch

### Payments
- Stripe Connect for marketplace transactions

---

## SECTION 5: DATABASE SCHEMA

### Core Tables
```sql
profiles (extends auth.users)
- id, email, display_name, profile_image, bio, style_tags
- total_likes, rank, stripe_account_id, consents
- created_at, updated_at

shoes/products
- id, sku, brand, name, full_name, colorway
- release_date, retail_price_cents, images, materials
- category, style_tags, amazon_url (WITH AFFILIATE TAG)
- created_at, updated_at

listings
- id, seller_id, product_id
- condition (new/like_new/good/fair), size_label
- price_cents, status (available/sold/cancelled)
- featured, images, description
- views_count, likes_count, created_at, updated_at

transactions
- id, listing_id, seller_id, buyer_id
- amount_cents, commission_cents
- stripe_payment_intent_id
- status (pending/completed/cancelled/refunded)
- shipping_tracking, created_at, completed_at

orders
- id, buyer_id, seller_id, listing_id
- status (pending/paid/shipped/delivered/cancelled/refunded)
- total_cents, platform_fee_cents
- stripe_payment_intent, shipping_address, tracking_number

fit_checks/fit_history
- id, user_id, image_url
- fit_score (1-10), style_tags, feedback
- dominant_colors, detected_shoe, created_at

analytics_events
- id, user_id, event_type (affiliate_click/view/search)
- metadata (JSONB), created_at
```

---

## SECTION 6: CORE FEATURES

### TikTok-Style Feed
- Infinite scroll with full-screen sneaker cards
- Tap left/right to navigate
- Gradient overlays, automatic view tracking
- Pre-fetches next batch, affiliate click handling

### Smart Search
- PostgreSQL full-text + Fuse.js fuzzy matching
- Filters: brand, style, price, gender, condition, release year
- Sort: price, newest, trending
- Saved searches and history

### AI "Check My Fit" Outfit Analysis
- Upload photo â†’ base64 â†’ Edge Function â†’ Gemini Vision
- Returns: rating (1-10), feedback, style_tags, dominant_colors, detected_shoe
- Database matches shoes to outfit
- 5 free/month, $1.99 per additional for free users, unlimited for Pro

### NFT Marketplace
- Tiers: Common (Silver), Rare (Blue), Legendary (Purple), Grail (Gold)
- Operations: mintNFT, listForSale, buyNFT, listNFTs
- Proof uploads in Supabase Storage

### Social Features
- Like, save, share (native API)
- Comments with threaded replies
- Follow creators, DM (premium)
- Activity feed, referral system ($10 credit each)

### Creator Marketplace
- Onboarding: verify identity, connect Stripe Express
- Dashboard: sales, orders, inventory, analytics, payouts
- Creator Cohort: First 50 sales at 0% commission, then 5%

### Admin Dashboard
- Restricted to dadsellsgadgets@gmail.com only
- Analytics, Product CRUD, User management
- Audit logging on all actions

---

## SECTION 7: FEED ALGORITHM

- 60% Personalized (Style DNA, history, similar users)
- 20% New/Trending
- 10% Sponsored/Featured
- 10% Followed Creators

---

## SECTION 8: MONETIZATION

### Marketplace Commission
- Standard: 8% (beats StockX 9-9.5%, GOAT 9.5-20%, Poshmark 20%)
- Featured: 12%
- Bundle Deals: 10%
- Minimum: $2/transaction
- Volume tiers: 7% at 50-200/quarter, 6% at 200-500, 5% at 500+

### Subscriptions
- **Pro ($9.99/mo or $99/yr):** 0% on first 5 sales/month, unlimited AI analysis, early access, verified badge, priority support, analytics, ad-free
- **Pro+ ($19.99/mo):** + AI pricing, auto-repricing, bulk uploads, market insights, API access

### Affiliate Revenue
- Amazon: shoeswiper-20
- Also: StockX (8-10%), GOAT Partner, Nike, Foot Locker, Farfetch

### Revenue Projections
- Year 1: $85K-$600K
- Year 3: $6M (at $50M GMV)
- Year 5: $25M (at $200M GMV)
- Acquisition Target: $75-125M (3-5x multiple on $25M revenue)

---

## SECTION 9: SECURITY REQUIREMENTS (CRITICAL)

- [ ] Move Gemini API key server-side (CURRENTLY EXPOSED - CRITICAL)
- [ ] Proper JWT authentication with refresh tokens
- [ ] Rate limiting on all endpoints
- [ ] RLS policies on all Supabase tables
- [ ] Encrypted storage (no sensitive data in localStorage)
- [ ] HTTPS everywhere
- [ ] Input validation and sanitization
- [ ] PCI-DSS compliance for payments
- [ ] GDPR/CCPA compliance
- [ ] Content moderation (AI + manual review + community reporting)
- [ ] Seller verification (ID + phone)
- [ ] Escrow payment system

---

## SECTION 10: CURRENT FILE STRUCTURE

```
shoeswiper-complete/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ favicon.svg
â”‚   â””â”€â”€ sw.js                    # Service Worker for push notifications
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ BottomNavigation.tsx
â”‚   â”‚   â”œâ”€â”€ EmailCaptureModal.tsx
â”‚   â”‚   â”œâ”€â”€ MusicPanel.tsx
â”‚   â”‚   â”œâ”€â”€ NotificationsPanel.tsx
â”‚   â”‚   â”œâ”€â”€ NotificationSettings.tsx
â”‚   â”‚   â”œâ”€â”€ PriceAlertButton.tsx
â”‚   â”‚   â”œâ”€â”€ ReferralCard.tsx
â”‚   â”‚   â”œâ”€â”€ ShoePanel.tsx
â”‚   â”‚   â”œâ”€â”€ SneakerCard.tsx
â”‚   â”‚   â””â”€â”€ nft/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAdmin.ts
â”‚   â”‚   â”œâ”€â”€ useAnalytics.ts
â”‚   â”‚   â”œâ”€â”€ useAuthGuard.ts
â”‚   â”‚   â”œâ”€â”€ useEmailCapture.ts
â”‚   â”‚   â”œâ”€â”€ useFavorites.ts
â”‚   â”‚   â”œâ”€â”€ useNFTMarketplace.ts
â”‚   â”‚   â”œâ”€â”€ useOutfitAnalysis.ts
â”‚   â”‚   â”œâ”€â”€ usePriceAlerts.ts
â”‚   â”‚   â”œâ”€â”€ usePushNotifications.ts
â”‚   â”‚   â”œâ”€â”€ useReferral.ts
â”‚   â”‚   â”œâ”€â”€ useSneakers.ts
â”‚   â”‚   â””â”€â”€ useSneakerSearch.ts
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ config.ts            # SINGLE SOURCE OF TRUTH
â”‚   â”‚   â”œâ”€â”€ deepLinks.ts
â”‚   â”‚   â”œâ”€â”€ supabaseClient.ts
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ AuthPage.tsx
â”‚   â”‚   â”œâ”€â”€ ClosetPage.tsx
â”‚   â”‚   â”œâ”€â”€ FeedPage.tsx
â”‚   â”‚   â”œâ”€â”€ ProfilePage.tsx
â”‚   â”‚   â”œâ”€â”€ SearchPage.tsx
â”‚   â”‚   â”œâ”€â”€ Unauthorized.tsx
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ index.css
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ AIContext.md                 # THIS FILE
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

---

## SECTION 11: IMPLEMENTED FEATURES (22 Total)

### Core Experience
1. TikTok-Style Vertical Feed with snap scrolling
2. Keyboard Navigation (arrows, escape)
3. Touch Gestures (swipe for panels)
4. Infinite Scroll with pre-loading

### User Features
5. Google OAuth with email allowlist
6. Favorites/Save System
7. Closet Page (grid view)
8. Profile Page with settings

### Monetization
9. Amazon Affiliate Integration (tag: shoeswiper-20)
10. Price Alert System
11. Push Notifications (service worker)
12. Email Capture System
13. Referral Program (tiered rewards)

### Discovery
14. Search with multi-filters
15. Music Integration (Apple Music + Spotify)
16. Deep Links with UTM/referral tracking

### Notifications
17. Notifications Panel (tabs)
18. Notification Bell with badge
19. Notification Settings (toggles)

### Admin
20. Admin Dashboard
21. Email Allowlist protection

---

## SECTION 12: PRIORITY INCOMPLETE FEATURES

| Priority | Feature | Status | Revenue Impact |
|----------|---------|--------|----------------|
| 1 | **Security Hardening** | CRITICAL | CRITICAL |
| 2 | Trending Feed Tab | Ready | MEDIUM |
| 3 | Exit Intent Popup | Ready | HIGH |
| 4 | Real Data Integration | Needed | HIGH |
| 5 | Social Features | Needs Design | MEDIUM |
| 6 | 3D Model Viewer | Blocked (needs .glb) | MEDIUM |
| 7 | AR Try-On | Needs WebXR | HIGH |
| 8 | Onboarding Flow | Ready | MEDIUM |

---

## SECTION 13: ENVIRONMENT VARIABLES

```env
# Client-side (VITE_ prefix)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
VITE_STRIPE_PUBLIC_KEY=your-stripe-key

# Server-side ONLY (NEVER expose)
VITE_GEMINI_API_KEY=MOVE_TO_SERVER_SIDE  # CRITICAL SECURITY ISSUE
SUPABASE_SERVICE_KEY=your-service-key
STRIPE_SECRET_KEY=sk_your_key
STRIPE_WEBHOOK_SECRET=whsec_your_secret
JWT_SECRET=your-jwt-secret
AWS_REGION=us-east-1
```

---

## SECTION 14: CONFIG (src/lib/config.ts)

```typescript
DEMO_MODE = true  // Toggle for local vs production
AFFILIATE_TAG = 'shoeswiper-20'
SHOW_PRICES = false  // Enable when Amazon PA-API connected
ADMIN_EMAIL = 'dadsellsgadgets@gmail.com'
ALLOWED_EMAILS = ['ianmerrill10@gmail.com', ADMIN_EMAIL]
```

---

## SECTION 15: GIT STATUS

**Branch:** `claude/organize-project-review-017XdUugVActQYqDf6tCpkWK`
**Push Command:** `git push -u origin claude/organize-project-review-017XdUugVActQYqDf6tCpkWK`
**Push Frequency:** Every 5 prompts (MANDATORY)

**Recent Commits:**
```
e5b4292 docs: Add AIContext.md for complete project continuity
6ad3e8e feat: Add email capture system for lead generation
e06f7b1 feat: Add push notifications for price drop alerts
2729b85 feat: Add notifications panel for price drop alerts
b9beacd feat: Add price drop alerts for saved shoes
ef8ffda feat: Add referral program for viral user growth
bc835ac feat: Add Closet page to view saved/favorited sneakers
f7f019b feat: Add deep link system for share-driven app installs
```

---

## SECTION 16: CONTINUATION INSTRUCTIONS

If starting fresh from this file:

1. Clone repo and checkout branch: `git checkout claude/organize-project-review-017XdUugVActQYqDf6tCpkWK`
2. Install: `cd shoeswiper-complete && npm install`
3. Run: `npm run dev`
4. **READ THIS ENTIRE FILE**
5. Ask user what to work on next
6. Follow ALL rules in Section 2
7. Update this file after EVERY prompt

---

## SECTION 17: ACQUISITION TARGETS

- Foot Locker, Nike, Dick's Sporting Goods
- LVMH, Authentic Brands Group
- Target: $10M+ acquisition at $75-125M valuation

---

*This file is the SINGLE SOURCE OF TRUTH for AI agents working on ShoeSwiper.*
*Last AI: Claude (Opus 4) | Last Human Prompt: Create AIContext file*


================ FILE: shoeswipermainproject2-main/PROJECT_AUDIT_REPORT.md ================
# ShoeSwiper Project Audit Report

**Generated:** 2024-12-03  
**Project:** ShoeSwiper - TikTok-style sneaker discovery marketplace  
**Status:** Pre-Launch Active Development

---

## Executive Summary

This audit analyzes the ShoeSwiper project across 20 categories, evaluating code quality, completeness, errors, and comments. The project is a React/TypeScript application with Supabase backend, featuring a TikTok-style sneaker feed, AI outfit analysis, NFT marketplace, and Amazon affiliate integration.

---

## Category Breakdown & Completeness Assessment

### 1. **Core Application Architecture** 
**Completeness: 95%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| React 18 Setup | âœ… Complete | Proper StrictMode, BrowserRouter |
| TypeScript Configuration | âœ… Complete | Strict typing enabled |
| Vite Build System | âœ… Complete | Modern build tooling |
| Routing Structure | âœ… Complete | React Router v6 with nested routes |
| App Entry Point | âœ… Complete | Clean main.tsx setup |

**Identified Issues:**
- None critical
- Minor: Line 84 in App.tsx uses `window.location.pathname` which could use `useLocation()` for consistency

---

### 2. **Authentication & Authorization**
**Completeness: 85%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Supabase Auth Integration | âœ… Complete | Google OAuth, email/password |
| Auth Guard Hook | âœ… Complete | useAuthGuard properly implemented |
| Email Allowlist | âœ… Complete | ALLOWED_EMAILS in config.ts |
| Admin Access Control | âœ… Complete | is_admin() SQL function |
| Session Management | âœ… Complete | Auth state listeners |
| Demo Mode Bypass | âœ… Complete | DEMO_MODE flag works |

**Identified Issues:**
- âš ï¸ **CRITICAL SECURITY**: AIContext.md mentions Gemini API key exposed client-side (line 233)
- No refresh token rotation implemented
- No rate limiting on auth endpoints

**Comments Found:** 11 comments - well documented

---

### 3. **Database Schema & RLS**
**Completeness: 90%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Core Tables | âœ… Complete | profiles, shoes, favorites, user_sneakers |
| NFT Tables | âœ… Complete | nfts, nft_ownership_history |
| Indexes | âœ… Complete | Performance optimized |
| RLS Policies | âœ… Complete | All tables secured |
| Functions | âœ… Complete | increment_shoe_view, match_shoes_for_outfit |
| Triggers | âœ… Complete | Auto-create profile on signup |

**Identified Issues:**
- Tables referenced in hooks but not in provided schema file:
  - price_alerts table
  - price_notifications table
  - push_subscriptions table
  - user_referrals table
  - email_subscriptions table
  - analytics_events table
  - music_clicks table
- Note: These may exist in production database but are not in 001_schema.sql

**Comments Found:** Well documented SQL schema (35+ comments)

---

### 4. **State Management**
**Completeness: 80%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Local State (useState) | âœ… Complete | Properly implemented |
| Custom Hooks | âœ… Complete | 14 custom hooks |
| Context/Global State | âš ï¸ Partial | No global state management library |
| Caching | âš ï¸ Partial | No React Query despite being listed in README |
| Demo Mode State | âœ… Complete | localStorage fallback |

**Identified Issues:**
- No Zustand implementation despite being mentioned in AIContext.md
- No React Query implementation despite being mentioned in tech stack
- Favorites state duplicated between components

**Comments Found:** 45+ comments across hooks - good documentation

---

### 5. **TikTok-Style Feed**
**Completeness: 95%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Snap Scroll | âœ… Complete | CSS snap-y snap-mandatory |
| Infinite Load | âœ… Complete | Intersection Observer |
| Keyboard Navigation | âœ… Complete | Arrow keys functional |
| Touch Gestures | âœ… Complete | Swipe detection |
| View Tracking | âœ… Complete | Analytics integration |
| Pre-fetching | âœ… Complete | Loads more when near end |

**Identified Issues:**
- None critical
- useEffect dependency array warning potential on line 39-42 of FeedPage.tsx

**Comments Found:** 8 comments - adequate

---

### 6. **Search & Filtering**
**Completeness: 90%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Text Search | âœ… Complete | PostgreSQL full-text |
| Brand Filter | âœ… Complete | Multi-select |
| Gender Filter | âœ… Complete | Single select |
| Style Tags | âœ… Complete | Multi-select |
| Price Range | âœ… Complete | Min/max inputs |
| Sort Options | âœ… Complete | 4 options |

**Identified Issues:**
- Fuse.js fuzzy matching mentioned but not implemented
- Search history not implemented despite being mentioned in README

**Comments Found:** 4 comments - minimal

---

### 7. **AI Outfit Analysis (Check My Fit)**
**Completeness: 75%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Image Upload | âœ… Complete | File input + camera |
| Base64 Conversion | âœ… Complete | FileReader API |
| Edge Function Call | âœ… Complete | Supabase functions.invoke |
| Manual Fallback | âœ… Complete | Style selector on error |
| Demo Mode | âœ… Complete | Mock analysis |
| Recommendations | âœ… Complete | match_shoes_for_outfit RPC |

**Identified Issues:**
- âš ï¸ **SECURITY**: Gemini API key properly handled server-side in Edge Function (supabase/functions/analyze-outfit/index.ts)
- No usage limit tracking (5 free/month mentioned but not implemented)
- Rate limiting implemented in Edge Function âœ…

**Comments Found:** 6 comments - adequate

---

### 8. **NFT Marketplace**
**Completeness: 90%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| NFT Listing | âœ… Complete | Grid view with filters |
| Mint Flow | âœ… Complete | 4-step wizard |
| Rarity System | âœ… Complete | Common/Rare/Legendary/Grail |
| Buy Function | âœ… Complete | Ownership transfer |
| List for Sale | âœ… Complete | Price setting |
| Proof Upload | âœ… Complete | Supabase Storage |
| Ownership History | âœ… Complete | Provenance tracking |

**Identified Issues:**
- `@/lib/supabaseClient` import alias configured in vite.config.ts âœ…
- NFTDetailModal component is complete with ownership history âœ…
- No actual blockchain integration (mock only) - documented as expected

**Comments Found:** 3 comments - minimal

---

### 9. **Amazon Affiliate Integration**
**Completeness: 95%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Affiliate Tag Config | âœ… Complete | `shoeswiper-20` |
| URL Builder | âœ… Complete | getAffiliateUrl(), getAffiliateUrlFromAsin() |
| ASIN Extraction | âœ… Complete | extractAsinFromUrl() |
| Click Tracking | âœ… Complete | affiliate_clicks table |
| Product Links | âœ… Complete | All buttons use affiliate URLs |
| Amazon API Config | âš ï¸ Partial | Placeholder only |

**Identified Issues:**
- Amazon Product Advertising API not connected
- SHOW_PRICES = false (waiting for API)

**Comments Found:** 15+ comments - well documented

---

### 10. **Music Integration**
**Completeness: 90%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Music Panel | âœ… Complete | Spotify/Apple/Amazon links |
| Music Metadata | âœ… Complete | song, artist, URLs |
| Affiliate Links | âœ… Complete | Amazon Music, Apple Music |
| Analytics Tracking | âœ… Complete | trackMusicClick() |
| Visual Design | âœ… Complete | Animated vinyl disc |

**Identified Issues:**
- Apple affiliate token is placeholder (`1000lJFj`)
- Music pairing is static (same 10 songs rotating)

**Comments Found:** 8 comments - good documentation

---

### 11. **Admin Dashboard**
**Completeness: 85%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Admin Layout | âœ… Complete | Sidebar navigation |
| Analytics Dashboard | âœ… Complete | Charts with Recharts |
| Product Manager | âœ… Complete | CRUD operations |
| User Manager | âœ… Complete | Ban/unban functionality |
| Audit Logging | âœ… Complete | logAction() function |

**Identified Issues:**
- No pagination on product/user lists
- Deletion confirmation uses `confirm()` - should use modal
- Line 25 in ProductManager.tsx: `confirm()` could be replaced

**Comments Found:** 2 comments - minimal

---

### 12. **Notifications System**
**Completeness: 80%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Push Notifications | âœ… Complete | Service Worker setup |
| Notification Panel | âœ… Complete | Tabs UI |
| Settings Panel | âœ… Complete | Toggle preferences |
| Price Alerts | âœ… Complete | Add/remove alerts |
| Badge Count | âœ… Complete | Unread indicator |

**Identified Issues:**
- Service Worker at `/public/sw.js` not reviewed
- VAPID key not configured
- push_subscriptions table missing from schema

**Comments Found:** 12 comments - good documentation

---

### 13. **User Profile & Favorites**
**Completeness: 90%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Profile Display | âœ… Complete | Avatar, stats |
| Favorites List | âœ… Complete | Grid view |
| Closet Page | âœ… Complete | Separate page |
| Toggle Favorite | âœ… Complete | Optimistic updates |
| localStorage Fallback | âœ… Complete | Demo mode support |

**Identified Issues:**
- Profile editing not implemented
- No profile picture upload

**Comments Found:** 8 comments - adequate

---

### 14. **Referral System**
**Completeness: 75%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Code Generation | âœ… Complete | Unique codes |
| Share Function | âœ… Complete | Native share + clipboard |
| Stats Tracking | âœ… Complete | Shares, clicks, signups |
| Reward Tiers | âœ… Complete | Starterâ†’Diamond |
| ReferralCard UI | âœ… Complete | Display component |

**Identified Issues:**
- user_referrals table missing from schema
- RPC functions (increment_referral_shares, track_referral_click, process_referral_signup) missing
- Rewards not actually redeemable

**Comments Found:** 6 comments - adequate

---

### 15. **Deep Links & Sharing**
**Completeness: 85%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Smart Share Links | âœ… Complete | Affiliate + app links |
| UTM Parameters | âœ… Complete | Source tracking |
| QR Code Generation | âœ… Complete | External API |
| Deep Link Parser | âœ… Complete | URL parsing |
| Referral Attribution | âœ… Complete | localStorage storage |

**Identified Issues:**
- iOS/Android app IDs empty (expected for pre-launch)
- Universal links not configured
- No `/shoe/:id` route in App.tsx (dynamic shoe viewing not implemented)

**Comments Found:** 20+ comments - well documented

---

### 16. **Email Capture System**
**Completeness: 80%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| Email Validation | âœ… Complete | Regex check |
| Source Tracking | âœ… Complete | price_alert, newsletter, etc. |
| Preferences | âœ… Complete | 4 toggle options |
| localStorage Fallback | âœ… Complete | Demo mode |
| Admin Export | âœ… Complete | getAllEmails() |

**Identified Issues:**
- email_subscriptions table missing from schema
- Exit intent popup mentioned but not implemented
- No email sending integration

**Comments Found:** 5 comments - minimal

---

### 17. **Styling & UI/UX**
**Completeness: 95%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Tailwind CSS | âœ… Complete | Full configuration |
| Dark Theme | âœ… Complete | zinc-950 base |
| Responsive Design | âœ… Complete | Mobile-first |
| Animations | âœ… Complete | Framer Motion |
| Safe Areas | âœ… Complete | Notch handling |
| Loading States | âœ… Complete | Skeletons, spinners |

**Identified Issues:**
- Some hardcoded colors could use CSS variables
- Custom animations in index.css not reviewed

**Comments Found:** 3 comments - minimal

---

### 18. **Type Safety & TypeScript**
**Completeness: 90%** âœ…

| Item | Status | Notes |
|------|--------|-------|
| Interface Definitions | âœ… Complete | types.ts comprehensive |
| Hook Types | âœ… Complete | Return types defined |
| Component Props | âœ… Complete | Interface props |
| Event Types | âœ… Complete | React.ChangeEvent, etc. |
| Generic Types | âœ… Complete | Rarity, NFTFilter |

**Identified Issues:**
- Some `any` types in admin hooks (useAdmin line 10, AnalyticsDashboard)
- `type: any` in SearchPage line 224

**Comments Found:** Section comments in types.ts - good structure

---

### 19. **Analytics & Tracking**
**Completeness: 85%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| View Tracking | âœ… Complete | trackShoeView() |
| Click Tracking | âœ… Complete | Affiliate clicks |
| Music Clicks | âœ… Complete | Platform breakdown |
| Panel Opens | âœ… Complete | Shoe/Music panels |
| Shares/Favorites | âœ… Complete | Social actions |
| In-Memory Demo | âœ… Complete | demoAnalytics object |

**Identified Issues:**
- analytics_events table missing from schema
- music_clicks table missing from schema
- No external analytics (Google Analytics, etc.)

**Comments Found:** 10 comments - good documentation

---

### 20. **Security & Best Practices**
**Completeness: 70%** âš ï¸

| Item | Status | Notes |
|------|--------|-------|
| RLS Policies | âœ… Complete | All tables protected |
| Admin Check | âœ… Complete | is_admin() function |
| Input Validation | âš ï¸ Partial | Basic only |
| XSS Prevention | âœ… Complete | React handles |
| CSRF | âœ… Complete | Supabase handles |

**Critical Security Issues (from AIContext.md):**
- âœ… Gemini API key properly handled in Edge Function (server-side)
- âŒ Rate limiting - partially implemented in Edge Function, not on all endpoints
- âŒ Encrypted storage not implemented
- âŒ No PCI-DSS compliance (payments not implemented)
- âŒ No content moderation
- âŒ No seller verification

**Comments Found:** Security section in AIContext.md - well documented concerns

---

## Summary Statistics

| Category | Completeness | Status |
|----------|--------------|--------|
| 1. Core Architecture | 95% | âœ… |
| 2. Authentication | 85% | âš ï¸ |
| 3. Database Schema | 90% | âœ… |
| 4. State Management | 80% | âš ï¸ |
| 5. TikTok Feed | 95% | âœ… |
| 6. Search & Filtering | 90% | âœ… |
| 7. AI Outfit Analysis | 75% | âš ï¸ |
| 8. NFT Marketplace | 90% | âœ… |
| 9. Affiliate Integration | 95% | âœ… |
| 10. Music Integration | 90% | âœ… |
| 11. Admin Dashboard | 85% | âš ï¸ |
| 12. Notifications | 80% | âš ï¸ |
| 13. Profile & Favorites | 90% | âœ… |
| 14. Referral System | 75% | âš ï¸ |
| 15. Deep Links | 85% | âš ï¸ |
| 16. Email Capture | 80% | âš ï¸ |
| 17. Styling & UI | 95% | âœ… |
| 18. Type Safety | 90% | âœ… |
| 19. Analytics | 85% | âš ï¸ |
| 20. Security | 70% | âš ï¸ |

**Overall Average Completeness: 86%**

---

## Critical Issues (Priority Order)

1. **ðŸŸ¡ HIGH - Schema Gap**: 7+ tables referenced in code but not in provided database schema file
2. **ðŸŸ¡ MEDIUM - State**: No React Query or Zustand despite being in tech stack
3. **ðŸŸ¡ MEDIUM - Rate Limiting**: Rate limiting implemented in AI edge function, but not on all endpoints
4. **ðŸŸ¢ LOW - Type Safety**: Some `any` types remain
5. **ðŸŸ¢ LOW - Testing**: No test coverage

---

## Code Quality Metrics

- **Total Files Reviewed**: 45+
- **Total Comments Found**: ~200+
- **TypeScript Coverage**: ~90%
- **Test Coverage**: 0% (no tests found)
- **Documentation**: Well documented (README, AIContext.md)

---

## Recommendations

### Immediate (Before Launch)
1. Add missing database tables to schema file (or verify they exist in production)
2. Implement rate limiting across all API endpoints
3. Add input validation middleware

### Short-term (Sprint 10)
1. Add React Query for data fetching optimization
2. Implement Zustand for global state
3. Add unit tests for critical hooks
4. Connect Amazon Product Advertising API

### Long-term
1. Implement full security checklist from AIContext.md
2. Add E2E testing with Playwright
3. Set up monitoring and error tracking
4. Implement real blockchain for NFTs

---

*Report generated by automated audit. Manual verification recommended for security-critical items.*


================ FILE: shoeswipermainproject2-main/README.md ================
# ShoeSwiper ðŸ‘Ÿ

**TikTok-style sneaker discovery marketplace with AI outfit matching and NFT authenticity.**

![ShoeSwiper](https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=1200&h=400&fit=crop)

## ðŸš€ Features

### Core Features
- **ðŸ“± TikTok-Style Feed** - Swipe through sneakers with full-screen cards
- **ðŸ” Smart Search** - Full-text search with filters (brand, price, style, gender)
- **ðŸ¤– AI Outfit Match** - Upload an outfit photo and get AI-powered sneaker recommendations using Gemini Vision
- **ðŸ’Ž NFT Marketplace** - Mint sneaker authenticity NFTs with rarity tiers (Common, Rare, Legendary, Grail)
- **ðŸ‘¤ User Profiles** - Favorites, closet management, and activity tracking
- **ðŸ›¡ï¸ Admin Dashboard** - Product management, user oversight, analytics

### Monetization
- **Amazon Affiliate Integration** - All product links include `?tag=shoeswiper-20`
- **Click Tracking** - Analytics for affiliate performance

## ðŸ› ï¸ Tech Stack

- **Frontend**: React 18, TypeScript, Tailwind CSS, Framer Motion
- **Backend**: Supabase (Auth, Database, Storage, Edge Functions)
- **AI**: Google Gemini Vision API
- **Styling**: Tailwind CSS with custom dark theme

## ðŸ“¦ Quick Start

### 1. Clone & Install

```bash
git clone https://github.com/ianmerrill10/shoeswipermainproject2.git
cd shoeswipermainproject2
npm install
```

### 2. Environment Setup

```bash
cp .env.example .env
```

Edit `.env` with your Supabase credentials:
```env
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
```

### 3. Database Setup

Run these SQL files in your Supabase SQL Editor (in order):

1. `database/001_schema.sql` - Tables, indexes, functions, RLS policies
2. `database/002_seed_data.sql` - Sample sneakers with affiliate links

### 4. Supabase Storage

Create a storage bucket for NFT proofs:
- Go to Supabase Dashboard â†’ Storage
- Create bucket: `nft-proofs` (private)

### 5. Edge Function (AI Outfit Match)

```bash
# Install Supabase CLI
npm install -g supabase

# Login to Supabase
supabase login

# Link to your project
supabase link --project-ref your-project-ref

# Set Gemini API key
supabase secrets set GEMINI_API_KEY=your-gemini-api-key

# Deploy edge function
supabase functions deploy analyze-outfit
```

### 6. Run Development Server

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

## ðŸ“ Project Structure

```
shoeswiper/
â”œâ”€â”€ public/                     # Static assets
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ 001_schema.sql          # Full database schema
â”‚   â””â”€â”€ 002_seed_data.sql       # Seed data (30+ sneakers)
â”œâ”€â”€ supabase/
â”‚   â””â”€â”€ functions/
â”‚       â””â”€â”€ analyze-outfit/     # Gemini Vision edge function
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ admin/              # Admin dashboard components
â”‚   â”‚   â”œâ”€â”€ check-fit/          # AI outfit match components
â”‚   â”‚   â”œâ”€â”€ nft/                # NFT marketplace components
â”‚   â”‚   â”œâ”€â”€ BottomNavigation.tsx
â”‚   â”‚   â””â”€â”€ SneakerCard.tsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAdmin.ts         # Admin CRUD operations
â”‚   â”‚   â”œâ”€â”€ useNFTMarketplace.ts# NFT minting/trading
â”‚   â”‚   â”œâ”€â”€ useOutfitAnalysis.ts# AI outfit analysis
â”‚   â”‚   â”œâ”€â”€ useSneakers.ts      # Feed data fetching
â”‚   â”‚   â””â”€â”€ useSneakerSearch.ts # Search with filters
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ admin/              # Admin pages
â”‚   â”‚   â”œâ”€â”€ AuthPage.tsx        # Login/signup
â”‚   â”‚   â”œâ”€â”€ CheckMyFit.tsx      # AI outfit match
â”‚   â”‚   â”œâ”€â”€ FeedPage.tsx        # Main swipe feed
â”‚   â”‚   â”œâ”€â”€ ProfilePage.tsx     # User profile
â”‚   â”‚   â””â”€â”€ SearchPage.tsx      # Search & filter
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabaseClient.ts   # Supabase client & helpers
â”‚   â”‚   â””â”€â”€ types.ts            # TypeScript interfaces
â”‚   â”œâ”€â”€ App.tsx                 # Main router
â”‚   â”œâ”€â”€ main.tsx                # Entry point
â”‚   â””â”€â”€ index.css               # Tailwind + custom styles
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ vite.config.ts
â””â”€â”€ README.md
```

## ðŸ” Admin Access

Only `dadsellsgadgets@gmail.com` has admin privileges:
- Product management (CRUD)
- User management (ban/unban)
- Analytics dashboard

## ðŸ“Š Database Schema

### Core Tables
- `profiles` - User profiles (extends auth.users)
- `shoes` - Product catalog
- `brands` - Brand metadata
- `favorites` - User favorites
- `user_sneakers` - User's closet (for NFT minting)
- `affiliate_clicks` - Click tracking

### NFT Tables
- `nfts` - Minted NFTs
- `nft_ownership_history` - Provenance tracking

### Admin Tables
- `audit_logs` - Admin action logging

## ðŸŽ¨ UI Components

### SneakerCard
Two variants:
- `grid` - For search results (compact)
- `feed` - For TikTok-style swipe (full-screen)

### NFT Rarity Tiers
| Tier | Badge Color | Description |
|------|-------------|-------------|
| Common | Silver | Everyday heat |
| Rare | Blue | Limited release |
| Legendary | Purple | Hyped collab |
| Grail | Gold | Once-in-a-lifetime |

## ðŸš¢ Deployment

### Vercel (Recommended)
```bash
npm run build
vercel --prod
```

### Environment Variables for Production
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_ANON_KEY`

### Supabase Edge Function Secrets
- `GEMINI_API_KEY`

## ðŸ“± Mobile Considerations

- Safe area insets for notched devices
- Touch-friendly navigation
- Pull-to-refresh disabled (use snap scroll instead)
- 100svh for proper mobile viewport

## ðŸ”— API Keys Needed

1. **Supabase** - [supabase.com](https://supabase.com)
2. **Google Gemini** - [makersuite.google.com](https://makersuite.google.com)
3. **Amazon Associates** - Tag: `shoeswiper-20`

## ðŸ“„ License

MIT License - See LICENSE file

## ðŸ¤ Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/amazing`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing`)
5. Open Pull Request

---

**Built with â¤ï¸ by @dadsellsgadgets**

*Affiliate Disclosure: ShoeSwiper earns commission from qualifying Amazon purchases.*


================ FILE: shoeswipermainproject2-main/shoeswiper-complete/.gitignore ================
# Dependencies
node_modules/
.pnp/
.pnp.js
package-lock.json

# Build output
dist/
build/

# Env files
.env
.env.local
.env.*.local

# IDE
.idea/
.vscode/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Logs
*.log
npm-debug.log*

# Testing
coverage/


================ FILE: shoeswipermainproject2-main/shoeswiper-complete/database/001_schema.sql ================
-- ============================================
-- SHOESWIPER DATABASE SCHEMA
-- Run this entire file in Supabase SQL Editor
-- ============================================

-- 1. Enable Extensions
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- ============================================
-- CORE TABLES
-- ============================================

-- 2. BRANDS TABLE
CREATE TABLE IF NOT EXISTS brands (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name TEXT NOT NULL UNIQUE,
    slug TEXT NOT NULL UNIQUE,
    logo_url TEXT,
    description TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 3. CATEGORIES TABLE
CREATE TABLE IF NOT EXISTS categories (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name TEXT NOT NULL UNIQUE,
    slug TEXT NOT NULL UNIQUE,
    icon TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 4. PROFILES TABLE (extends auth.users)
CREATE TABLE IF NOT EXISTS profiles (
    id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
    email TEXT,
    username TEXT UNIQUE,
    avatar_url TEXT,
    bio TEXT,
    is_banned BOOLEAN DEFAULT false,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 5. SHOES TABLE (Main Catalog)
CREATE TABLE IF NOT EXISTS shoes (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name TEXT NOT NULL,
    brand TEXT NOT NULL,
    category_slug TEXT,
    
    -- Pricing
    price NUMERIC(10, 2) NOT NULL,
    retail_price NUMERIC(10, 2),
    sale_price NUMERIC(10, 2),
    currency TEXT DEFAULT 'USD',
    
    -- Media & Affiliate
    image_url TEXT NOT NULL,
    amazon_url TEXT NOT NULL, -- MUST include ?tag=shoeswiper-20
    amazon_asin TEXT,
    
    -- Attributes
    style_tags TEXT[] DEFAULT '{}',
    color_tags TEXT[] DEFAULT '{}',
    gender TEXT CHECK (gender IN ('men', 'women', 'unisex', 'kids')),
    sizes_available TEXT[] DEFAULT '{}',
    release_date DATE,
    description TEXT,
    
    -- Metrics
    favorite_count INTEGER DEFAULT 0,
    view_count INTEGER DEFAULT 0,
    click_count INTEGER DEFAULT 0,
    vibe_score INTEGER DEFAULT 0,
    
    -- Status
    is_active BOOLEAN DEFAULT true,
    is_featured BOOLEAN DEFAULT false,
    stock_status TEXT DEFAULT 'in_stock',
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 6. FAVORITES TABLE
CREATE TABLE IF NOT EXISTS favorites (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
    shoe_id UUID REFERENCES shoes(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(user_id, shoe_id)
);

-- 7. USER SNEAKERS (Closet)
CREATE TABLE IF NOT EXISTS user_sneakers (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
    shoe_id UUID REFERENCES shoes(id) ON DELETE CASCADE,
    added_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(user_id, shoe_id)
);

-- 8. PRICE HISTORY
CREATE TABLE IF NOT EXISTS price_history (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    shoe_id UUID REFERENCES shoes(id) ON DELETE CASCADE,
    price NUMERIC(10, 2) NOT NULL,
    recorded_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 9. AFFILIATE CLICKS
CREATE TABLE IF NOT EXISTS affiliate_clicks (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    shoe_id UUID REFERENCES shoes(id) ON DELETE CASCADE,
    user_id UUID REFERENCES auth.users(id),
    clicked_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 10. AUDIT LOGS (Admin)
CREATE TABLE IF NOT EXISTS audit_logs (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    admin_email TEXT NOT NULL,
    action TEXT NOT NULL,
    target_table TEXT NOT NULL,
    target_id UUID,
    details JSONB,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ============================================
-- NFT TABLES
-- ============================================

-- 11. NFTs TABLE
CREATE TABLE IF NOT EXISTS nfts (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    sneaker_id UUID REFERENCES shoes(id),
    owner_id UUID REFERENCES auth.users(id),
    token_id TEXT UNIQUE,
    rarity TEXT CHECK (rarity IN ('common', 'rare', 'legendary', 'grail')),
    minted_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    for_sale BOOLEAN DEFAULT false,
    price_eth DECIMAL(18, 8),
    auction_end TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 12. NFT OWNERSHIP HISTORY
CREATE TABLE IF NOT EXISTS nft_ownership_history (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    nft_id UUID REFERENCES nfts(id) ON DELETE CASCADE,
    from_user UUID REFERENCES auth.users(id),
    to_user UUID REFERENCES auth.users(id),
    price_eth DECIMAL(18, 8),
    transferred_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ============================================
-- INDEXES
-- ============================================

-- Full Text Search
CREATE INDEX IF NOT EXISTS idx_shoes_search ON shoes USING GIN (to_tsvector('english', name || ' ' || brand || ' ' || COALESCE(description, '')));

-- Array Indexes
CREATE INDEX IF NOT EXISTS idx_shoes_style_tags ON shoes USING GIN (style_tags);
CREATE INDEX IF NOT EXISTS idx_shoes_color_tags ON shoes USING GIN (color_tags);

-- Sorting/Filtering Indexes
CREATE INDEX IF NOT EXISTS idx_shoes_price ON shoes (price);
CREATE INDEX IF NOT EXISTS idx_shoes_created_at ON shoes (created_at);
CREATE INDEX IF NOT EXISTS idx_shoes_popularity ON shoes (view_count DESC, click_count DESC);
CREATE INDEX IF NOT EXISTS idx_shoes_brand ON shoes (brand);
CREATE INDEX IF NOT EXISTS idx_shoes_featured ON shoes (is_featured) WHERE is_featured = true;

-- User Indexes
CREATE INDEX IF NOT EXISTS idx_favorites_user ON favorites (user_id);
CREATE INDEX IF NOT EXISTS idx_user_sneakers_user ON user_sneakers (user_id);
CREATE INDEX IF NOT EXISTS idx_affiliate_clicks_date ON affiliate_clicks (clicked_at);

-- NFT Indexes
CREATE INDEX IF NOT EXISTS idx_nfts_owner ON nfts (owner_id);
CREATE INDEX IF NOT EXISTS idx_nfts_sneaker ON nfts (sneaker_id);
CREATE INDEX IF NOT EXISTS idx_nfts_for_sale ON nfts (for_sale) WHERE for_sale = true;

-- ============================================
-- FUNCTIONS
-- ============================================

-- Admin Check Function
CREATE OR REPLACE FUNCTION is_admin() 
RETURNS BOOLEAN AS $$
BEGIN
  RETURN auth.jwt() ->> 'email' = 'dadsellsgadgets@gmail.com';
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Atomic View Counter
CREATE OR REPLACE FUNCTION increment_shoe_view(shoe_id UUID)
RETURNS VOID AS $$
BEGIN
  UPDATE shoes SET view_count = view_count + 1 WHERE id = shoe_id;
END;
$$ LANGUAGE plpgsql;

-- Atomic Click Counter
CREATE OR REPLACE FUNCTION increment_shoe_click(shoe_id UUID)
RETURNS VOID AS $$
BEGIN
  UPDATE shoes SET click_count = click_count + 1 WHERE id = shoe_id;
END;
$$ LANGUAGE plpgsql;

-- Style Matching Function (for AI Outfit Match)
CREATE OR REPLACE FUNCTION match_shoes_for_outfit(
  p_style_tags TEXT[],
  p_color_tags TEXT[],
  p_limit INTEGER DEFAULT 5
)
RETURNS TABLE (
  id UUID,
  name TEXT,
  brand TEXT,
  price NUMERIC,
  image_url TEXT,
  amazon_url TEXT,
  style_tags TEXT[],
  color_tags TEXT[],
  match_score INTEGER
) AS $$
BEGIN
  RETURN QUERY
  SELECT 
    s.id,
    s.name,
    s.brand,
    s.price,
    s.image_url,
    s.amazon_url,
    s.style_tags,
    s.color_tags,
    (
      COALESCE(array_length(ARRAY(SELECT unnest(s.style_tags) INTERSECT SELECT unnest(p_style_tags)), 1), 0) * 30 +
      COALESCE(array_length(ARRAY(SELECT unnest(s.color_tags) INTERSECT SELECT unnest(p_color_tags)), 1), 0) * 20 +
      LEAST(s.favorite_count, 10)
    )::INTEGER as match_score
  FROM shoes s
  WHERE s.is_active = true
    AND (s.style_tags && p_style_tags OR s.color_tags && p_color_tags)
  ORDER BY match_score DESC
  LIMIT p_limit;
END;
$$ LANGUAGE plpgsql;

-- ============================================
-- ROW LEVEL SECURITY
-- ============================================

-- Enable RLS on all tables
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE shoes ENABLE ROW LEVEL SECURITY;
ALTER TABLE brands ENABLE ROW LEVEL SECURITY;
ALTER TABLE favorites ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_sneakers ENABLE ROW LEVEL SECURITY;
ALTER TABLE affiliate_clicks ENABLE ROW LEVEL SECURITY;
ALTER TABLE audit_logs ENABLE ROW LEVEL SECURITY;
ALTER TABLE nfts ENABLE ROW LEVEL SECURITY;
ALTER TABLE nft_ownership_history ENABLE ROW LEVEL SECURITY;

-- PROFILES
CREATE POLICY "Public profiles are viewable" ON profiles FOR SELECT USING (true);
CREATE POLICY "Users can update own profile" ON profiles FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Users can insert own profile" ON profiles FOR INSERT WITH CHECK (auth.uid() = id);

-- SHOES
CREATE POLICY "Public can view active shoes" ON shoes FOR SELECT USING (is_active = true);
CREATE POLICY "Admin can insert shoes" ON shoes FOR INSERT WITH CHECK (is_admin());
CREATE POLICY "Admin can update shoes" ON shoes FOR UPDATE USING (is_admin());
CREATE POLICY "Admin can delete shoes" ON shoes FOR DELETE USING (is_admin());

-- BRANDS
CREATE POLICY "Public can view brands" ON brands FOR SELECT USING (true);

-- FAVORITES
CREATE POLICY "Users can view own favorites" ON favorites FOR SELECT USING (auth.uid() = user_id);
CREATE POLICY "Users can add favorites" ON favorites FOR INSERT WITH CHECK (auth.uid() = user_id);
CREATE POLICY "Users can remove favorites" ON favorites FOR DELETE USING (auth.uid() = user_id);

-- USER SNEAKERS
CREATE POLICY "Users can view own closet" ON user_sneakers FOR SELECT USING (auth.uid() = user_id);
CREATE POLICY "Users can add to closet" ON user_sneakers FOR INSERT WITH CHECK (auth.uid() = user_id);
CREATE POLICY "Users can remove from closet" ON user_sneakers FOR DELETE USING (auth.uid() = user_id);

-- AFFILIATE CLICKS
CREATE POLICY "Anyone can insert clicks" ON affiliate_clicks FOR INSERT WITH CHECK (true);
CREATE POLICY "Admin can view clicks" ON affiliate_clicks FOR SELECT USING (is_admin());

-- AUDIT LOGS
CREATE POLICY "Admin can view logs" ON audit_logs FOR SELECT USING (is_admin());
CREATE POLICY "Admin can insert logs" ON audit_logs FOR INSERT WITH CHECK (is_admin());

-- NFTs
CREATE POLICY "Public can view NFTs" ON nfts FOR SELECT USING (true);
CREATE POLICY "Users can mint NFTs" ON nfts FOR INSERT WITH CHECK (auth.uid() = owner_id);
CREATE POLICY "Owners can update NFTs" ON nfts FOR UPDATE USING (auth.uid() = owner_id);

-- NFT OWNERSHIP HISTORY
CREATE POLICY "Public can view history" ON nft_ownership_history FOR SELECT USING (true);
CREATE POLICY "Insert history on transfer" ON nft_ownership_history FOR INSERT WITH CHECK (true);

-- ============================================
-- TRIGGER: Auto-create profile on signup
-- ============================================

CREATE OR REPLACE FUNCTION handle_new_user()
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO profiles (id, email, username)
  VALUES (
    NEW.id,
    NEW.email,
    COALESCE(NEW.raw_user_meta_data->>'username', split_part(NEW.email, '@', 1))
  );
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

DROP TRIGGER IF EXISTS on_auth_user_created ON auth.users;
CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW EXECUTE FUNCTION handle_new_user();


================ FILE: shoeswipermainproject2-main/shoeswiper-complete/database/002_seed_data.sql ================
-- ============================================
-- SHOESWIPER SEED DATA
-- Amazon Affiliate Tag: shoeswiper-20
-- Generated: 2025-12-02
-- Run AFTER 001_schema.sql
-- ============================================

-- ============================================
-- BRANDS
-- ============================================
INSERT INTO brands (name, slug, description) VALUES
('Nike', 'nike', 'Just Do It. World''s leading athletic footwear brand.'),
('Adidas', 'adidas', 'Impossible is Nothing. German sportswear giant.'),
('New Balance', 'new-balance', 'Fearlessly Independent Since 1906.'),
('Converse', 'converse', 'Shoes are boring. Wear sneakers.'),
('Vans', 'vans', 'Off The Wall. Skateboarding culture icon.'),
('Puma', 'puma', 'Forever Faster. German athletic brand.'),
('Reebok', 'reebok', 'Be More Human. Classic fitness footwear.'),
('ASICS', 'asics', 'Sound Mind, Sound Body. Japanese performance brand.'),
('Jordan', 'jordan', 'Become Legendary. Nike subsidiary basketball brand.'),
('Yeezy', 'yeezy', 'Adidas Yeezy. Premium designer collaboration.')
ON CONFLICT (slug) DO NOTHING;

-- ============================================
-- CATEGORIES
-- ============================================
INSERT INTO categories (name, slug, icon) VALUES
('Lifestyle', 'lifestyle', 'ðŸ‘Ÿ'),
('Running', 'running', 'ðŸƒ'),
('Basketball', 'basketball', 'ðŸ€'),
('Skateboarding', 'skateboarding', 'ðŸ›¹'),
('Training', 'training', 'ðŸ’ª'),
('Casual', 'casual', 'ðŸ˜Ž')
ON CONFLICT (slug) DO NOTHING;

-- ============================================
-- SHOES (50+ items with Amazon Affiliate Links)
-- All URLs include ?tag=shoeswiper-20
-- ============================================

-- ============================================
-- NIKE (15+ items)
-- ============================================

INSERT INTO shoes (name, brand, category_slug, price, retail_price, image_url, amazon_url, style_tags, color_tags, gender, sizes_available, description, is_active, is_featured, favorite_count, view_count, vibe_score) VALUES
-- Air Force 1 Collection
('Air Force 1 ''07 Low White', 'Nike', 'lifestyle', 115.00, 115.00, 
 'https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=800',
 'https://www.amazon.com/dp/B07RZ6HKBS?tag=shoeswiper-20',
 ARRAY['classic', 'streetwear', 'casual', 'clean', 'timeless'],
 ARRAY['white'],
 'unisex',
 ARRAY['7', '7.5', '8', '8.5', '9', '9.5', '10', '10.5', '11', '11.5', '12', '13'],
 'The radiance lives on in the Nike Air Force 1 ''07. Crisp leather, bold colors and the perfect amount of flash make this icon a daily go-to.',
 true, true, 487, 892, 95),

('Air Force 1 ''07 Low Black', 'Nike', 'lifestyle', 115.00, 115.00,
 'https://images.unsplash.com/photo-1600269452121-4f2416e55c28?w=800',
 'https://www.amazon.com/s?k=Nike+Air+Force+1+Black&tag=shoeswiper-20',
 ARRAY['classic', 'streetwear', 'casual', 'clean', 'timeless'],
 ARRAY['black'],
 'unisex',
 ARRAY['7', '7.5', '8', '8.5', '9', '9.5', '10', '10.5', '11', '11.5', '12', '13'],
 'The iconic Air Force 1 in all-black leather. A streetwear essential that pairs with everything.',
 true, false, 324, 678, 90),

-- Air Max Collection
('Air Max 90 White', 'Nike', 'lifestyle', 130.00, 130.00,
 'https://images.unsplash.com/photo-1605348532760-6753d2c43329?w=800',
 'https://www.amazon.com/s?k=Nike+Air+Max+90+White&tag=shoeswiper-20',
 ARRAY['retro', 'casual', 'classic', 'athletic'],
 ARRAY['white'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12'],
 'Nothing as iconic as an icon. The Air Max 90 stays true to its OG running roots with the iconic Waffle sole, stitched overlays and classic TPU details.',
 true, false, 256, 534, 85),

('Air Max 90 Black/White', 'Nike', 'lifestyle', 130.00, 130.00,
 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800',
 'https://www.amazon.com/s?k=Nike+Air+Max+90+Black+White&tag=shoeswiper-20',
 ARRAY['retro', 'casual', 'classic', 'athletic'],
 ARRAY['black', 'white'],
 'men',
 ARRAY['7', '8', '9', '10', '11', '12', '13'],
 'The Air Max 90 in classic black and white. Visible Air cushioning and bold colorway.',
 true, false, 298, 612, 87),

('Air Max 97 Silver Bullet', 'Nike', 'lifestyle', 175.00, 175.00,
 'https://images.unsplash.com/photo-1584735175315-9d5df23860e6?w=800',
 'https://www.amazon.com/s?k=Nike+Air+Max+97+Silver+Bullet&tag=shoeswiper-20',
 ARRAY['retro', 'metallic', 'streetwear', 'bold', 'hypebeast'],
 ARRAY['silver', 'metallic'],
 'men',
 ARRAY['8', '9', '10', '11', '12'],
 'The full-length Air unit and reflective design made the Air Max 97 an instant icon. The Silver Bullet colorway is legendary.',
 true, true, 412, 834, 92),

-- Dunk Collection
('Dunk Low Retro Panda', 'Nike', 'lifestyle', 110.00, 110.00,
 'https://images.unsplash.com/photo-1607853202273-797f1c22a38e?w=800',
 'https://www.amazon.com/dp/B08SBR2P7L?tag=shoeswiper-20',
 ARRAY['streetwear', 'casual', 'clean', 'hypebeast', 'trendy'],
 ARRAY['black', 'white'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'Created for the hardwood but taken to the streets, the ''80s basketball icon returns with classic details and throwback hoops flair.',
 true, true, 534, 987, 96),

('Dunk Low Grey Fog', 'Nike', 'lifestyle', 110.00, 110.00,
 'https://images.unsplash.com/photo-1605348532760-6753d2c43329?w=800',
 'https://www.amazon.com/s?k=Nike+Dunk+Low+Grey+Fog&tag=shoeswiper-20',
 ARRAY['streetwear', 'casual', 'clean', 'minimalist'],
 ARRAY['grey', 'white'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11'],
 'The Dunk Low Grey Fog features a clean white and grey leather upper. Subtle and versatile.',
 true, false, 287, 543, 84),

('Dunk Low Retro University Blue', 'Nike', 'lifestyle', 110.00, 110.00,
 'https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=800',
 'https://www.amazon.com/s?k=Nike+Dunk+Low+University+Blue&tag=shoeswiper-20',
 ARRAY['streetwear', 'casual', 'bold', 'trendy'],
 ARRAY['blue', 'white'],
 'men',
 ARRAY['8', '9', '10', '11', '12'],
 'The Nike Dunk Low in UNC colors. A tribute to basketball heritage.',
 true, false, 312, 621, 88),

-- Jordan Collection (Nike subsidiary)
('Air Jordan 1 Low', 'Jordan', 'lifestyle', 110.00, 110.00,
 'https://images.unsplash.com/photo-1600185365926-3a2ce3cdb9eb?w=800',
 'https://www.amazon.com/s?k=Air+Jordan+1+Low&tag=shoeswiper-20',
 ARRAY['streetwear', 'casual', 'classic', 'basketball'],
 ARRAY['various'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12'],
 'An icon for casual kicks. The Air Jordan 1 Low offers a clean, classic look that''s iconic in every colorway.',
 true, false, 356, 712, 86),

('Air Jordan 1 Mid', 'Jordan', 'lifestyle', 125.00, 125.00,
 'https://images.unsplash.com/photo-1600185365926-3a2ce3cdb9eb?w=800',
 'https://www.amazon.com/s?k=Air+Jordan+1+Mid&tag=shoeswiper-20',
 ARRAY['streetwear', 'casual', 'classic', 'basketball'],
 ARRAY['various'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12', '13'],
 'The Air Jordan 1 Mid offers a fresh look that''s iconic. Premium leather and signature Wings logo.',
 true, false, 398, 789, 88),

('Air Jordan 1 Retro High OG', 'Jordan', 'basketball', 180.00, 180.00,
 'https://images.unsplash.com/photo-1600185365926-3a2ce3cdb9eb?w=800',
 'https://www.amazon.com/s?k=Air+Jordan+1+Retro+High+OG&tag=shoeswiper-20',
 ARRAY['streetwear', 'hypebeast', 'classic', 'basketball', 'luxury'],
 ARRAY['various'],
 'men',
 ARRAY['8', '9', '10', '11', '12', '13'],
 'The Air Jordan 1 that started it all. Premium leather, Nike Air cushioning, and the legendary Wings logo.',
 true, true, 523, 978, 97),

('Air Jordan 4 Retro', 'Jordan', 'basketball', 210.00, 210.00,
 'https://images.unsplash.com/photo-1607853202273-797f1c22a38e?w=800',
 'https://www.amazon.com/s?k=Air+Jordan+4+Retro&tag=shoeswiper-20',
 ARRAY['streetwear', 'hypebeast', 'retro', 'basketball', 'chunky'],
 ARRAY['various'],
 'men',
 ARRAY['8', '9', '10', '11', '12', '13'],
 'The AJ4 changed the game with visible Air, supportive wings and bold design. A true sneaker grail.',
 true, true, 456, 876, 94),

-- Other Nike Models
('Blazer Mid ''77 Vintage', 'Nike', 'lifestyle', 105.00, 105.00,
 'https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=800',
 'https://www.amazon.com/s?k=Nike+Blazer+Mid+77+Vintage&tag=shoeswiper-20',
 ARRAY['retro', 'vintage', 'casual', 'classic', 'clean'],
 ARRAY['white', 'black'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'In the ''70s, Nike was the new shoe on the block. So new that they were still experimenting with game-changing designs.',
 true, false, 234, 467, 82),

('Cortez Basic', 'Nike', 'lifestyle', 90.00, 90.00,
 'https://images.unsplash.com/photo-1600185365926-3a2ce3cdb9eb?w=800',
 'https://www.amazon.com/s?k=Nike+Cortez&tag=shoeswiper-20',
 ARRAY['retro', 'classic', 'casual', 'vintage', 'minimalist'],
 ARRAY['white', 'red', 'blue'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11'],
 'Nike''s first track shoe, the Nike Cortez is a legend. Clean lines and lightweight design.',
 true, false, 189, 345, 78),

('Vomero 5', 'Nike', 'running', 160.00, 160.00,
 'https://images.unsplash.com/photo-1584735175315-9d5df23860e6?w=800',
 'https://www.amazon.com/s?k=Nike+Vomero+5&tag=shoeswiper-20',
 ARRAY['chunky', 'techwear', 'retro', 'trendy', 'athletic'],
 ARRAY['grey', 'silver'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12'],
 'The Vomero 5 is back. With its chunky shape and layered look, it brings back early 2000s vibes.',
 true, false, 267, 534, 86),

-- ============================================
-- ADIDAS (10+ items)
-- ============================================

('Samba OG White', 'Adidas', 'lifestyle', 100.00, 100.00,
 'https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800',
 'https://www.amazon.com/s?k=Adidas+Samba+OG+White&tag=shoeswiper-20',
 ARRAY['vintage', 'casual', 'streetwear', 'classic', 'timeless'],
 ARRAY['white', 'gum'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The Samba is a timeless classic. Originally designed for soccer, now a lifestyle icon with the iconic T-toe and gum sole.',
 true, true, 498, 934, 95),

('Samba OG Black', 'Adidas', 'lifestyle', 100.00, 100.00,
 'https://images.unsplash.com/photo-1597045566677-8cf032ed6634?w=800',
 'https://www.amazon.com/s?k=Adidas+Samba+OG+Black&tag=shoeswiper-20',
 ARRAY['vintage', 'casual', 'streetwear', 'classic', 'timeless'],
 ARRAY['black', 'gum'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The Samba in classic black leather. The perfect everyday sneaker with iconic three stripes.',
 true, true, 467, 889, 94),

('Gazelle Indoor', 'Adidas', 'lifestyle', 120.00, 120.00,
 'https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800',
 'https://www.amazon.com/s?k=Adidas+Gazelle+Indoor&tag=shoeswiper-20',
 ARRAY['vintage', 'casual', 'streetwear', 'retro', 'trendy'],
 ARRAY['various'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11'],
 'The Gazelle Indoor brings ''70s handball style to modern streets. Suede upper and gum sole.',
 true, false, 312, 623, 88),

('Stan Smith', 'Adidas', 'casual', 95.00, 95.00,
 'https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=800',
 'https://www.amazon.com/s?k=Adidas+Stan+Smith&tag=shoeswiper-20',
 ARRAY['minimalist', 'clean', 'classic', 'casual', 'timeless'],
 ARRAY['white', 'green'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12'],
 'The Stan Smith is a tennis icon that has become a lifestyle staple. Clean white leather with signature green heel tab.',
 true, false, 378, 756, 87),

('Superstar', 'Adidas', 'lifestyle', 100.00, 100.00,
 'https://images.unsplash.com/photo-1603787081207-362bcef7c144?w=800',
 'https://www.amazon.com/s?k=Adidas+Superstar&tag=shoeswiper-20',
 ARRAY['classic', 'streetwear', 'retro', 'hip-hop', 'timeless'],
 ARRAY['white', 'black'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12'],
 'Born on the basketball court. Iconic shell toe and premium leather make the Superstar a legend.',
 true, false, 345, 689, 85),

('Campus 00s', 'Adidas', 'lifestyle', 110.00, 110.00,
 'https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800',
 'https://www.amazon.com/s?k=Adidas+Campus+00s&tag=shoeswiper-20',
 ARRAY['retro', 'casual', 'streetwear', 'skate', 'trendy'],
 ARRAY['various'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11'],
 'The Campus returns with early 2000s styling. Suede upper and chunky proportions.',
 true, false, 287, 567, 84),

('Forum Low', 'Adidas', 'lifestyle', 110.00, 110.00,
 'https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=800',
 'https://www.amazon.com/s?k=Adidas+Forum+Low&tag=shoeswiper-20',
 ARRAY['retro', 'basketball', 'casual', 'classic', 'clean'],
 ARRAY['white'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'Originally made for the basketball court in ''84. The Forum Low brings retro hoops style to the streets.',
 true, false, 256, 512, 82),

('Ultraboost 22', 'Adidas', 'running', 190.00, 190.00,
 'https://images.unsplash.com/photo-1556906781-9a412961c28c?w=800',
 'https://www.amazon.com/s?k=Adidas+Ultraboost&tag=shoeswiper-20',
 ARRAY['running', 'athletic', 'comfort', 'modern', 'performance'],
 ARRAY['black'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12'],
 'Experience epic energy return with Boost cushioning. The Ultraboost delivers incredible comfort mile after mile.',
 true, false, 312, 634, 86),

('NMD_R1', 'Adidas', 'lifestyle', 150.00, 150.00,
 'https://images.unsplash.com/photo-1556906781-9a412961c28c?w=800',
 'https://www.amazon.com/s?k=Adidas+NMD+R1&tag=shoeswiper-20',
 ARRAY['streetwear', 'modern', 'casual', 'comfort', 'trendy'],
 ARRAY['various'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12'],
 'The NMD_R1 combines Boost cushioning with modern streetwear design. Primeknit upper for ultimate comfort.',
 true, false, 234, 467, 83),

('Yeezy Boost 350 V2', 'Yeezy', 'lifestyle', 230.00, 230.00,
 'https://images.unsplash.com/photo-1587563871167-1ee9c731aefb?w=800',
 'https://www.amazon.com/s?k=Yeezy+Boost+350+V2&tag=shoeswiper-20',
 ARRAY['hypebeast', 'luxury', 'streetwear', 'modern', 'trendy'],
 ARRAY['various'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12'],
 'The iconic Yeezy Boost 350 V2 features Primeknit construction and full-length Boost cushioning.',
 true, true, 489, 978, 93),

-- ============================================
-- NEW BALANCE (8+ items)
-- ============================================

('550 White/Green', 'New Balance', 'lifestyle', 130.00, 130.00,
 'https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800',
 'https://www.amazon.com/s?k=New+Balance+550+White+Green&tag=shoeswiper-20',
 ARRAY['retro', 'casual', 'streetwear', 'clean', 'trendy'],
 ARRAY['white', 'green'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The New Balance 550 is a ''80s basketball classic reborn. Leather upper with iconic N logo.',
 true, true, 456, 912, 94),

('550 White/Navy', 'New Balance', 'lifestyle', 130.00, 130.00,
 'https://images.unsplash.com/photo-1539185441755-769473a23570?w=800',
 'https://www.amazon.com/s?k=New+Balance+550+White+Navy&tag=shoeswiper-20',
 ARRAY['retro', 'casual', 'streetwear', 'clean', 'classic'],
 ARRAY['white', 'navy'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The 550 in classic white and navy. Vintage basketball style for everyday wear.',
 true, false, 378, 756, 90),

('574 Classic', 'New Balance', 'lifestyle', 90.00, 90.00,
 'https://images.unsplash.com/photo-1604671801908-6f0c6a092c05?w=800',
 'https://www.amazon.com/s?k=New+Balance+574&tag=shoeswiper-20',
 ARRAY['classic', 'casual', 'retro', 'comfort', 'timeless'],
 ARRAY['grey'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12'],
 'The New Balance 574 is a timeless classic. ENCAP midsole and suede/mesh upper.',
 true, false, 267, 534, 82),

('990v5 Grey', 'New Balance', 'lifestyle', 185.00, 185.00,
 'https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800',
 'https://www.amazon.com/s?k=New+Balance+990v5+Grey&tag=shoeswiper-20',
 ARRAY['premium', 'comfort', 'classic', 'dad-shoe', 'timeless'],
 ARRAY['grey'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12', '13'],
 'Made in USA. The 990v5 is the pinnacle of New Balance craftsmanship. Premium materials and ENCAP cushioning.',
 true, false, 312, 623, 88),

('990v6', 'New Balance', 'running', 200.00, 200.00,
 'https://images.unsplash.com/photo-1539185441755-769473a23570?w=800',
 'https://www.amazon.com/s?k=New+Balance+990v6&tag=shoeswiper-20',
 ARRAY['premium', 'comfort', 'running', 'dad-shoe', 'luxury'],
 ARRAY['grey'],
 'unisex',
 ARRAY['7', '8', '9', '10', '11', '12', '13'],
 'The latest in the legendary 990 series. Made in USA with FuelCell cushioning.',
 true, false, 287, 567, 89),

('2002R', 'New Balance', 'lifestyle', 150.00, 150.00,
 'https://images.unsplash.com/photo-1600185365483-26d7a4cc7519?w=800',
 'https://www.amazon.com/s?k=New+Balance+2002R&tag=shoeswiper-20',
 ARRAY['retro', 'chunky', 'streetwear', 'comfort', 'trendy'],
 ARRAY['grey', 'cream'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'Originally from 2010, the 2002R returns with premium suede and N-ERGY cushioning.',
 true, false, 298, 589, 86),

('530', 'New Balance', 'lifestyle', 100.00, 100.00,
 'https://images.unsplash.com/photo-1604671801908-6f0c6a092c05?w=800',
 'https://www.amazon.com/s?k=New+Balance+530&tag=shoeswiper-20',
 ARRAY['retro', 'running', 'casual', 'chunky'],
 ARRAY['white', 'silver'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11'],
 'The 530 brings ''90s running style to modern streets. ABZORB cushioning and retro design.',
 true, false, 212, 423, 80),

('327', 'New Balance', 'lifestyle', 100.00, 100.00,
 'https://images.unsplash.com/photo-1539185441755-769473a23570?w=800',
 'https://www.amazon.com/s?k=New+Balance+327&tag=shoeswiper-20',
 ARRAY['retro', 'bold', 'casual', 'trendy'],
 ARRAY['various'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11'],
 'The 327 takes ''70s running heritage and flips it. Oversized N logo and wedge silhouette.',
 true, false, 234, 456, 81),

-- ============================================
-- CONVERSE (3+ items)
-- ============================================

('Chuck Taylor All Star High', 'Converse', 'casual', 65.00, 65.00,
 'https://images.unsplash.com/photo-1463100099107-aa0980c362e6?w=800',
 'https://www.amazon.com/s?k=Converse+Chuck+Taylor+All+Star+High&tag=shoeswiper-20',
 ARRAY['classic', 'vintage', 'casual', 'punk', 'timeless'],
 ARRAY['black', 'white'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12', '13'],
 'The original basketball shoe, now a cultural icon. Canvas upper and rubber toe cap since 1917.',
 true, false, 345, 689, 84),

('Chuck Taylor All Star Low', 'Converse', 'casual', 60.00, 60.00,
 'https://images.unsplash.com/photo-1463100099107-aa0980c362e6?w=800',
 'https://www.amazon.com/s?k=Converse+Chuck+Taylor+All+Star+Low&tag=shoeswiper-20',
 ARRAY['classic', 'vintage', 'casual', 'minimalist', 'timeless'],
 ARRAY['various'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12', '13'],
 'The low-top version of the classic Chuck. Versatile and timeless.',
 true, false, 312, 623, 82),

('Chuck 70 High', 'Converse', 'casual', 85.00, 85.00,
 'https://images.unsplash.com/photo-1463100099107-aa0980c362e6?w=800',
 'https://www.amazon.com/s?k=Converse+Chuck+70&tag=shoeswiper-20',
 ARRAY['vintage', 'premium', 'casual', 'classic', 'retro'],
 ARRAY['parchment', 'black'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12'],
 'The Chuck 70 uses the original ''70s pattern for a premium vintage look. Higher rubber foxing and cushioned insole.',
 true, false, 278, 556, 85),

-- ============================================
-- VANS (3+ items)
-- ============================================

('Old Skool', 'Vans', 'skateboarding', 70.00, 70.00,
 'https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=800',
 'https://www.amazon.com/s?k=Vans+Old+Skool&tag=shoeswiper-20',
 ARRAY['skate', 'classic', 'casual', 'punk', 'streetwear'],
 ARRAY['black', 'white'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12', '13'],
 'The Vans Old Skool, the first shoe to feature the iconic Vans Sidestripe. A skate legend since ''77.',
 true, false, 356, 712, 86),

('Sk8-Hi', 'Vans', 'skateboarding', 75.00, 75.00,
 'https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=800',
 'https://www.amazon.com/s?k=Vans+Sk8+Hi&tag=shoeswiper-20',
 ARRAY['skate', 'classic', 'casual', 'punk', 'streetwear'],
 ARRAY['black', 'white'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12', '13'],
 'The Sk8-Hi is the legendary high top that has inspired skaters since 1978. Padded collar for support and style.',
 true, false, 298, 596, 84),

('Authentic', 'Vans', 'skateboarding', 55.00, 55.00,
 'https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=800',
 'https://www.amazon.com/s?k=Vans+Authentic&tag=shoeswiper-20',
 ARRAY['skate', 'classic', 'casual', 'minimalist', 'simple'],
 ARRAY['various'],
 'unisex',
 ARRAY['5', '6', '7', '8', '9', '10', '11', '12'],
 'The original Vans shoe. Simple canvas upper and signature waffle outsole since 1966.',
 true, false, 234, 467, 79),

-- ============================================
-- PUMA (2+ items)
-- ============================================

('Suede Classic', 'Puma', 'lifestyle', 75.00, 75.00,
 'https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800',
 'https://www.amazon.com/s?k=Puma+Suede+Classic&tag=shoeswiper-20',
 ARRAY['retro', 'casual', 'streetwear', 'classic', 'hip-hop'],
 ARRAY['black', 'white'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The Puma Suede has been a streetwear staple since 1968. Iconic formstrip and soft suede upper.',
 true, false, 267, 534, 82),

('Palermo', 'Puma', 'lifestyle', 90.00, 90.00,
 'https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=800',
 'https://www.amazon.com/s?k=Puma+Palermo&tag=shoeswiper-20',
 ARRAY['retro', 'casual', 'vintage', 'trendy'],
 ARRAY['various'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11'],
 'The Palermo returns from the ''80s terrace scene. Suede upper and gum rubber outsole.',
 true, false, 198, 396, 78),

-- ============================================
-- REEBOK (2+ items)
-- ============================================

('Club C 85', 'Reebok', 'lifestyle', 80.00, 80.00,
 'https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=800',
 'https://www.amazon.com/s?k=Reebok+Club+C+85&tag=shoeswiper-20',
 ARRAY['classic', 'casual', 'clean', 'minimalist', 'retro'],
 ARRAY['white', 'green'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'A tennis court classic from 1985. Soft leather upper and timeless design.',
 true, false, 287, 567, 83),

('Classic Leather', 'Reebok', 'lifestyle', 75.00, 75.00,
 'https://images.unsplash.com/photo-1603787081207-362bcef7c144?w=800',
 'https://www.amazon.com/s?k=Reebok+Classic+Leather&tag=shoeswiper-20',
 ARRAY['classic', 'retro', 'casual', 'clean', 'timeless'],
 ARRAY['white'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The Reebok Classic Leather is an icon. Soft leather upper and die-cut EVA midsole.',
 true, false, 234, 467, 80),

-- ============================================
-- ASICS (2+ items)
-- ============================================

('Gel-1130', 'ASICS', 'running', 120.00, 120.00,
 'https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=800',
 'https://www.amazon.com/s?k=ASICS+Gel+1130&tag=shoeswiper-20',
 ARRAY['retro', 'running', 'chunky', 'techwear', 'trendy'],
 ARRAY['white', 'silver'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The Gel-1130 brings 2000s running tech to modern streets. GEL cushioning and retro style.',
 true, false, 298, 596, 86),

('Gel-Kayano 14', 'ASICS', 'running', 150.00, 150.00,
 'https://images.unsplash.com/photo-1584735175315-9d5df23860e6?w=800',
 'https://www.amazon.com/s?k=ASICS+Gel+Kayano+14&tag=shoeswiper-20',
 ARRAY['retro', 'running', 'techwear', 'metallic', 'trendy'],
 ARRAY['silver', 'cream'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'Originally released in 2008, the Gel-Kayano 14 is back. GEL cushioning and Y2K aesthetic.',
 true, true, 345, 689, 89),

-- ============================================
-- ADDITIONAL POPULAR SNEAKERS
-- ============================================

-- More Nike
('Nike Air Max Plus', 'Nike', 'lifestyle', 175.00, 175.00,
 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800',
 'https://www.amazon.com/s?k=Nike+Air+Max+Plus&tag=shoeswiper-20',
 ARRAY['streetwear', 'retro', 'bold', 'chunky'],
 ARRAY['black', 'silver'],
 'men',
 ARRAY['8', '9', '10', '11', '12'],
 'The Air Max Plus features unique gradient uppers and visible Tuned Air cushioning.',
 true, false, 289, 578, 85),

('Nike SB Dunk Low', 'Nike', 'skateboarding', 110.00, 110.00,
 'https://images.unsplash.com/photo-1607853202273-797f1c22a38e?w=800',
 'https://www.amazon.com/s?k=Nike+SB+Dunk+Low&tag=shoeswiper-20',
 ARRAY['skate', 'streetwear', 'casual', 'hypebeast'],
 ARRAY['various'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The Nike SB Dunk Low brings skateboard-specific features to the classic Dunk silhouette.',
 true, false, 356, 712, 87),

-- More Adidas
('Adidas Spezial', 'Adidas', 'lifestyle', 100.00, 100.00,
 'https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800',
 'https://www.amazon.com/s?k=Adidas+Spezial&tag=shoeswiper-20',
 ARRAY['vintage', 'casual', 'terrace', 'classic'],
 ARRAY['blue', 'white', 'gum'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11'],
 'The Spezial is a handball classic from the ''70s. Suede upper and iconic three stripes.',
 true, false, 267, 534, 84),

('Adidas Rivalry Low', 'Adidas', 'lifestyle', 95.00, 95.00,
 'https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=800',
 'https://www.amazon.com/s?k=Adidas+Rivalry+Low&tag=shoeswiper-20',
 ARRAY['retro', 'basketball', 'casual', 'clean'],
 ARRAY['white'],
 'unisex',
 ARRAY['6', '7', '8', '9', '10', '11', '12'],
 'The Rivalry Low brings ''80s basketball style to the streets. Leather upper and perforated stripes.',
 true, false, 198, 396, 79),

-- More Jordan
('Air Jordan 3 Retro', 'Jordan', 'basketball', 200.00, 200.00,
 'https://images.unsplash.com/photo-1600185365926-3a2ce3cdb9eb?w=800',
 'https://www.amazon.com/s?k=Air+Jordan+3+Retro&tag=shoeswiper-20',
 ARRAY['basketball', 'hypebeast', 'retro', 'iconic'],
 ARRAY['white', 'cement', 'grey'],
 'men',
 ARRAY['8', '9', '10', '11', '12', '13'],
 'The Air Jordan 3 introduced the Jumpman logo and elephant print. A true sneaker grail.',
 true, true, 423, 845, 93),

('Air Jordan 11 Retro', 'Jordan', 'basketball', 225.00, 225.00,
 'https://images.unsplash.com/photo-1607853202273-797f1c22a38e?w=800',
 'https://www.amazon.com/s?k=Air+Jordan+11+Retro&tag=shoeswiper-20',
 ARRAY['basketball', 'luxury', 'formal', 'hypebeast', 'iconic'],
 ARRAY['black', 'white'],
 'men',
 ARRAY['8', '9', '10', '11', '12', '13'],
 'The Air Jordan 11 is considered the greatest basketball shoe ever. Patent leather and full-length Air.',
 true, true, 467, 934, 96);

-- ============================================
-- UPDATE RANDOM METRICS FOR REALISM
-- ============================================
-- Add some variance to the initial metrics
UPDATE shoes SET 
  view_count = view_count + floor(random() * 200)::int,
  favorite_count = favorite_count + floor(random() * 100)::int,
  click_count = floor(random() * 300 + 50)::int
WHERE click_count IS NULL OR click_count = 0;


================ FILE: shoeswipermainproject2-main/shoeswiper-complete/index.html ================
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#18181b" />
    <meta name="description" content="ShoeSwiper - TikTok-style sneaker discovery marketplace with AI outfit matching" />
    <meta name="keywords" content="sneakers, shoes, marketplace, AI, outfit, matching, Nike, Jordan, Adidas" />
    <meta property="og:title" content="ShoeSwiper - Swipe. Match. Cop." />
    <meta property="og:description" content="Discover sneakers that match your style with AI-powered outfit analysis" />
    <meta property="og:type" content="website" />
    <title>ShoeSwiper - Swipe. Match. Cop.</title>
  </head>
  <body class="bg-zinc-950 text-white">
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


================ FILE: shoeswipermainproject2-main/shoeswiper-complete/package.json ================
{
  "name": "shoeswiper",
  "version": "1.0.0",
  "description": "TikTok-style sneaker discovery marketplace with AI outfit matching and NFT authenticity",
  "private": true,
  "type": "module",
  "engines": {
    "node": ">=20.0.0"
  },
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.39.0",
    "framer-motion": "^10.16.16",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-icons": "^4.12.0",
    "react-router-dom": "^6.21.0",
    "recharts": "^2.10.3"
  },
  "devDependencies": {
    "@types/react": "^18.2.43",
    "@types/react-dom": "^18.2.17",
    "@typescript-eslint/eslint-plugin": "^6.14.0",
    "@typescript-eslint/parser": "^6.14.0",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.16",
    "eslint": "^8.55.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.5",
    "postcss": "^8.4.32",
    "tailwindcss": "^3.3.6",
    "typescript": "^5.2.2",
    "vite": "^5.0.8"
  },
  "keywords": ["sneakers", "marketplace", "tiktok", "react", "supabase", "nft", "ai"],
  "author": "dadsellsgadgets",
  "license": "MIT"
}


================ FILE: shoeswipermainproject2-main/shoeswiper-complete/postcss.config.js ================
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};


================ FILE: shoeswipermainproject2-main/shoeswiper-complete/public/favicon.svg ================
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316"/>
      <stop offset="100%" style="stop-color:#ea580c"/>
    </linearGradient>
  </defs>
  <rect width="100" height="100" rx="20" fill="url(#grad)"/>
  <text x="50" y="65" font-size="50" text-anchor="middle" fill="white">ðŸ‘Ÿ</text>
</svg>


